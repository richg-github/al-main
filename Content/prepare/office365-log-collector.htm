<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation_Skin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="Prepare|Log Collectors" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta name="zd-site-verification" content="9muqcovj07pyvoduai2al" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" />
        <meta name="description" content="Learn how to set up log collection of Microsoft Office 365, which requires you first to grant Alert Logic permission with the appropriate administrative privileges in varying accounts." />
        <meta tags="office365, o365, office 365" />
        <link rel="apple-touch-icon" sizes="1545x1545" href="../../Skins/Favicons/AlertLogic_Logo_2C_RGB_V_Standard.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Set Up Collection of Microsoft Office 365 Logs</title>
        <meta http-equiv="Cache-control" content="no-cache" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <style>@import url('https://richg-github.github.io/al-styles/override-main.css');

</style>
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.separator-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.print-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.expand-all-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="1545x1545" href="../../Skins/Favicons/AlertLogic_Logo_2C_RGB_V_Standard.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                        <div class="button-group-container-left">
                                            <button class="button needs-pie previous-topic-button" title="Navigate previous" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie next-topic-button" title="Navigate next" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <div class="button-separator">
                                            </div>
                                            <button class="button needs-pie print-button" title="Print">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Print">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1>Set Up Collection of <span class="mc-variable ALVariables.Office_365_1 variable">Microsoft Office 365</span> Logs</h1>
                                        <div class="note">
                                            <p>The instructions in this document are for an older setup of the <span class="mc-variable ALVariables.Office_365_1 variable">Microsoft Office 365</span> log collector. If this is your first time setting up <span class="mc-variable ALVariables.Office_365_1 variable">Microsoft Office 365</span> collectors,   see <a href="../configure/collectors/o365.htm" class="MCXref xref">Configure Microsoft Office 365 Log Collector</a>.<MadCap:conditionalText data-mc-conditions="Primary.Draft Content"> If you previously installed the older version of <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> and want to update using the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span>, see 
<a href="#Update" class="MCXref xref">Set Up Collection of Microsoft Office 365 Logs</a>.</MadCap:conditionalText></p>
                                        </div>
                                        <p><span class="mc-variable ALVariables.Company variable">Alert Logic</span> supports <span class="mc-variable ALVariables.Office_365_1 variable">Microsoft Office 365</span> log collection. To collect <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> logs, you must first create and set up an <span class="mc-variable ALVariables.Company variable">Alert Logic</span> application in <span class="mc-variable ALVariables.Azure_1 variable">Microsoft Azure</span>.</p>
                                        <h2><a name="before-you-begin"></a>Before you begin</h2>
                                        <p>To perform the setup required to grant <span class="mc-variable ALVariables.Company variable">Alert Logic</span> permission to collect <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> logs, you must have access to the following:</p>
                                        <ul>
                                            <li>A <span class="mc-variable ALVariables.Office_365_1 variable">Microsoft Office 365</span> account with administrative privileges</li>
                                            <li>A <span class="mc-variable ALVariables.Azure_1 variable">Microsoft Azure</span> account with administrative privileges</li>
                                            <li>An <span class="mc-variable ALVariables.Company variable">Alert Logic</span> account with administrative privileges</li>
                                        </ul>
                                        <p>You cannot complete this procedure without administrative privileges in all three accounts.</p>
                                        <h2><a name="Register"></a>Register a new <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> web application</h2>
                                        <p>In the <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> portal, you must register a new <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> web application to collect <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> logs.</p>
                                        <p><b>To register an <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> web application: </b>
                                        </p>
                                        <ol>
                                            <li value="1">Log into the <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> portal as an Active Directory tenant administrator.</li>
                                            <li value="2">Click <b>Show all</b> to expand the left navigation area, and then  click <b>Azure Active Directory</b>.</li>
                                            <li value="3">Select <b>App Registrations</b>, and then click <b>+ New application registration</b>.</li>
                                            <li value="4">Provide the following information in the fields:<ul><li>Name - for example, alo365collector.</li><li>Select <b>Single tenant</b> for supported account types.</li><li>Leave the Redirect URI blank. </li></ul></li>
                                            <li value="5">Click <b>Register</b>. Note the Application (client) ID, for example, a261478c-84fb-42f9-84c2-de050a4babe3.</li>
                                        </ol>
                                        <h2>Set up Active Directory security permissions</h2>
                                        <p>You must set up Active Directory security permissions for the application you created so it can read threat intelligence data and activity reports for your organization.</p>
                                        <p><b>To set up Active Directory permissions:</b>
                                        </p>
                                        <ol>
                                            <li value="1">On the main panel under the new application, click <b>API Permissions</b>, and then click <b>+ Add a permission</b>.</li>
                                            <li value="2">Locate and click <b><span class="mc-variable ALVariables.Office_365 variable">Office 365</span> Management APIs</b>.</li>
                                            <li value="3">In <b>Application permissions</b>, expand and select <b>ActivityFeed.Read</b>and <b>ServiceHealth.Read</b>.</li>
                                            <li value="4">Ensure all necessary permissions are selected, and then click <b>Add permissions</b>.</li>
                                            <li value="5">Click <b>Grant admin consent</b>, and then click <b>Accept</b> to confirm. </li>
                                            <div class="note">Only the Active Directory tenant administrator can grant permissions to an Azure Active Directory application.</div>
                                            <li value="6">On the left navigation area, select <b>Certificates &amp; secrets</b>, and then click <b>+ New client secret</b>. </li>
                                            <li value="7">Type a key <b>Description</b> and set the duration to <b>Never</b>.</li>
                                            <li value="8">Click <b>Add</b>.</li>
                                            <li value="9">
Save the key value, which you need during ARM template deployment.</li>
                                            <li value="10">Click <b>Overview</b> to return to the application summary, and then click the link under <b>Managed application in local directory</b>.</li>
                                            <li value="11">Click <b>Properties</b>, and then note the Object ID associated with the application. </li>
                                            <div class="note">This Object ID not the same Object ID found under the Registered app view or under Settings. </div>
                                        </ol>
                                        <h2>Create an <span class="mc-variable ALVariables.Company variable">Alert Logic</span> access key</h2>
                                        <div>
                                            <p>You must generate an access key that allows the application you created to connect to the <span class="mc-variable ALVariables.Company variable">Alert Logic</span> back end. You can do this from the <span class="mc-variable ALVariables.ALUI_1 variable">Alert Logic console</span>. </p>
                                            <p>Access keys contain the two components you need to configure access to the <span class="mc-variable ALVariables.Company variable">Alert Logic</span> back end—the access key ID and a secret key. You need both values to configure a log source.</p>
                                            <p style="font-weight: bold;">Access key components:</p>
                                            <ul>
                                                <li>Access key ID—Numerical identification for the access key you generated. You can retrieve this value from the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span>.</li>
                                                <li>Secret key—Encrypted account information that provides permission for data to flow from <span class="mc-variable ALVariables.AWS variable">AWS</span> to the <span class="mc-variable ALVariables.Company variable">Alert Logic</span> back end. You cannot retrieve this value after you initially generate the access key. If you lose your secret key, you must generate a new access key. </li>
                                            </ul>
                                            <p>After you generate a new access key, the <span class="mc-variable ALVariables.ALUI_1 variable">Alert Logic console</span> allows you to retrieve only the access key ID. You must store both the access key ID and the secret access key immediately after you generate the access key. You can choose to copy and paste the access key ID and the secret key to a file, or you can automatically save your access key information to a .CSV file that you can save to a secure location. </p>
                                            <div class="caution">If you lose your access key ID or your secret key, you can no longer use the access key to configure new integrations and must generate a new access key. </div>
                                            <p style="font-weight: bold;">To generate and store an access key:</p>
                                            <ol>
                                                <li value="1">In the <span class="mc-variable ALVariables.ALUI_1 variable">Alert Logic console</span>, click the Settings icon (<img src="../Resources/Images/supportThreeDots.png" />), and then select <b>Users</b>. </li>
                                                <li value="2">Scroll to the user account you want to modify, and then click <b>VIEW</b>. </li>
                                                <li value="3">In the account information slideout panel, click the <b>Access Keys</b> tab. </li>
                                                <li value="4">In the <b>Access Keys</b> tab, click <b>GENERATE NEW KEY</b>.</li>
                                                <li value="5">From the Access Key Created window, click <b>DOWNLOAD&#160;KEY&#160;FILE</b>.</li>
                                            </ol>
                                            <p>To learn how to manage access keys, see <a href="access-key-management.htm" class="MCXref xref">Create and Manage Alert Logic Access Keys </a>.</p>
                                        </div>
                                        <h2><a name="download-ARM-template"></a>Download and deploy the <span class="mc-variable ALVariables.Azure variable">Azure</span> Resource Manager (ARM) template</h2>
                                        <p>Before you can configure <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> log collection, you must log into <span class="mc-variable ALVariables.Azure_1 variable">Microsoft Azure</span> and download and deploy an ARM&#160;template. You can use either the <span class="mc-variable ALVariables.Azure_1 variable">Microsoft Azure</span> portal or a command line to deploy the template. </p>
                                        <div class="note">
                                            <p>The steps in this section require an active <span class="mc-variable ALVariables.Azure variable">Azure</span> subscription. To verify your <span class="mc-variable ALVariables.Azure variable">Azure</span> subscription, visit Azure subscriptions blade.</p>
                                        </div>
                                        <p>If your organization uses multiple Active Directory tenants, log into the same tenant used to <a href="#Register" class="Bookmark MCXref xref xrefBookmark">Register a new Office 365 web application</a>. To find your <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> tenant ID, see <a href="https://support.office.com/en-gb/article/find-your-office-365-tenant-id-6891b561-a52d-4ade-9f39-b492285e2c9b">Find your Office 365 tenant ID</a>.</p>
                                        <h3>Deploy with the custom ARM template through the Azure portal</h3>
                                        <p><b>To access and deploy the ARM template through the Azure portal, click <a href="https://portal.azure.com/#create/Microsoft.Template/uri/https:%2F%2Fraw.githubusercontent.com%2Falertlogic%2Fazure-collector%2Fmaster%2Ftemplate.json" target="_blank">this link</a>, and then:</b> </p>
                                        <ol>
                                            <li value="1">Provide the following required template parameters:
			    <ul><li><b>Name:</b> The name of the log source to appear in the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span>. This must be unique to any previous deployment of a Function App.</li><li><b>Resource Group:</b> Create a new resource group for the collector. This must be unique to any previous resource group name.</li><li><b>Storage Name:</b> Any storage account name that does not currently exist. This must be unique to any previous storage account name.</li><li><b><span class="mc-variable ALVariables.Company variable">Alert Logic</span> Access Key ID:</b> The <kbd>access_key_id</kbd> you created above. </li><li><b><span class="mc-variable ALVariables.Company variable">Alert Logic</span> Secret Key:</b> The <kbd>secret_key</kbd> you created above.</li><li><b><span class="mc-variable ALVariables.Company variable">Alert Logic</span> API endpoint:</b> Leave the default value (api.global-services.global.alertlogic.com).</li><li><b><span class="mc-variable ALVariables.Company variable">Alert Logic</span> Data Residency:</b> Leave the default value.</li><li><b><span class="mc-variable ALVariables.Office_365 variable">Office 365</span> Content Streams:</b> The log types you want to collect. Valid values are:</li><ul><li>["Audit.AzureActiveDirectory","Audit.Exchange","Audit.SharePoint","Audit.General"]</li></ul><li><b>Service Principal ID:</b> The <kbd>Object ID</kbd> of the application that created the subscription.<div class="note">You can obtain this value from <b>Azure</b> &gt; <b>AD</b> &gt; <b>App registrations</b> &gt; <b>Your app name</b> &gt; <b>Link under Managed application in local directory</b> &gt; <b>Properties</b> &gt; <b>Object ID</b>.</div></li></ul><ul><li><b>App Client ID:</b> The GUID of your application that created the subscription. You can obtain it from <b>Azure</b> &gt; <b>AD</b> &gt; <b>App registrations</b> &gt; <b>Your app name</b> &gt; <b>Application (client) ID</b>.</li><li><b>App Client Secret:</b> The secret key of your application from <b>App Registrations</b> &gt; <b>Certificates &amp; Secrets</b>. </li></ul></li>
                                            <li value="2">Click <b>Purchase</b>. </li>
                                        </ol>
                                        <h3>Deploy through the Azure CLI</h3>
                                        <p>If you want to deploy through the <span class="mc-variable ALVariables.Azure variable">Azure</span> command line, you can use either <a href="https://docs.microsoft.com/en-gb/azure/cloud-shell/quickstart#start-cloud-shell"><span class="mc-variable ALVariables.Azure variable">Azure</span> Cloud Shell</a> or a local installation of <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest"><span class="mc-variable ALVariables.Azure variable">Azure</span> CLI</a>.</p>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="18" alt="Closed" data-mc-alt2="Open" /><b>To deploy through the </b><span style="font-weight: bold;" class="mc-variable ALVariables.Azure variable">Azure</span><b> command line:</b></a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <ol>
                                                    <li value="1">In the command line, type the following to create a new resource group. (The example below creates a new resource group in the "Central US" location.)<br /><kbd>az group create --name &lt;new-resource-group-name&gt; --location "Central US"</kbd></li>
                                                    <li value="2">In the <span class="mc-variable ALVariables.Azure variable">Azure</span> portal, access the <b>Resource groups</b> blade, and then select the resource group you created.</li>
                                                    <li value="3">Select <b>Access Control (IAM)</b>, and add the <b>Website Contributor</b> role to the Active Directory application identity you created above.</li>
                                                    <li value="4">In the command line, type the following command to deploy a template, and enter the required parameters when prompted.<br /><kbd>az group deployment create \<br /> &#160;&#160;&#160;--resource-group &lt;new-resource-group-name&gt; \<br /> &#160;&#160;&#160;--template-uri "https://raw.githubusercontent.com/alertlogic/azure-collector/master/template.json"</kbd></li>
                                                </ol>
                                            </div>
                                        </div>
                                        <h3 data-mc-conditions="Primary.NOTinBHOOF">Verify the installation</h3>
                                        <p data-mc-conditions="Primary.NOTinBHOOF">As a best practice, you should verify the template installed successfully.</p>
                                        <p data-mc-conditions="Primary.NOTinBHOOF"><b>To verify successful installation of the template:</b>
                                        </p>
                                        <ol>
                                            <li value="1" data-mc-conditions="Primary.NOTinBHOOF">In the Azure portal, access <b>Function Apps</b>, and then choose the <span class="mc-variable ALVariables.Company variable">Alert Logic</span> <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> collector function.</li>
                                            <li value="2" data-mc-conditions="Primary.NOTinBHOOF"> Click <b>Functions</b> &gt; <b>Master</b> &gt; <b>Monitor</b>, and verify the recent log entry has the status of <b>OK</b> and contains no error messages.</li>
                                            <li value="3" data-mc-conditions="Primary.NOTinBHOOF">In the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span>, browse to <b>Deployments</b> &gt; <b>All Deployments</b> &gt; <b>Log Sources</b>, and then filter the list by <b>Push (<span class="mc-variable ALVariables.Office_365 variable">Office 365</span>, CloudWatch)</b> collection method.</li>
                                            <li value="4" data-mc-conditions="Primary.NOTinBHOOF">Verify a new <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> log source with the name provided during <kbd>az group deployment create</kbd> appears with the source status of <b>OK</b>.</li>
                                        </ol>
                                        <div class="tip">
                                            <p>If the collector stops sending information to <span class="mc-variable ALVariables.Company variable">Alert Logic</span>, the <b>Current Status</b> for the source displays  the error, "Collector is offline." If you see this error, try one of the following troubleshooting methods:</p>
                                            <ul>
                                                <li>If you either deleted the collector application, or disabled it from the <span class="mc-variable ALVariables.Azure variable">Azure</span> portal, the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span> may not have removed it. To correct the issue, delete the collector source from the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span>.</li>
                                                <li>Occasionally the collector has an issue with the <span class="mc-variable ALVariables.Azure variable">Azure</span> Active Directory, which causes an error. <span class="mc-variable ALVariables.Company variable">Alert Logic</span> monitors these errors and resolves them, but you may also restart the function app from the <span class="mc-variable ALVariables.Azure variable">Azure</span> portal.</li>
                                            </ul>
                                        </div>
                                        <p>For information about how <span class="mc-variable ALVariables.Azure variable">Azure</span> functions use the Application and <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> tenant ID as a <kbd>PublisherIdentifier</kbd> during <span class="mc-variable ALVariables.Office_365 variable">Office 365</span> management API requests,  see <a href="https://github.com/alertlogic/azure-collector/blob/master/README.md#how-the-office-365-collector-works" target="_blank" title="How the Alert Logic Office 365 Collector Works" alt="How the Alert Logic Office 365 Collector Works">How the Office 365 Collector Works</a>. </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>