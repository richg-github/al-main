<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation_Skin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="Configure|Collectors" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta name="zd-site-verification" content="9muqcovj07pyvoduai2al" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="1545x1545" href="../../../Skins/Favicons/AlertLogic_Logo_2C_RGB_V_Standard.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>Configure Salesforce Log Collector</title>
        <meta http-equiv="Cache-control" content="no-cache" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <style>@import url('https://dl.dropboxusercontent.com/s/q5nt7ghnm4mfv88/override-main.css');

</style>
        <link href="../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.separator-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.print-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.expand-all-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="1545x1545" href="../../../Skins/Favicons/AlertLogic_Logo_2C_RGB_V_Standard.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                        <div class="button-group-container-left">
                                            <button class="button needs-pie previous-topic-button" title="Navigate previous" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie next-topic-button" title="Navigate next" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <div class="button-separator">
                                            </div>
                                            <button class="button needs-pie print-button" title="Print">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Print">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1>Configure Salesforce Log Collector</h1>
                                        <p>The <span class="mc-variable ALVariables.Company variable">Alert Logic</span> Salesforce Collector is an <span class="mc-variable ALVariables.AWS variable">AWS</span>-based API Poll (PAWS) log collector library mechanism designed to collect logs from the Salesforce Customer relationship management (CRM) platform. </p>
                                        <p>You can find Salesforce logs collected with keyword search in the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span> <a href="../../get-started/search-a.htm" class="MCXref xref">Get Started with Search</a> page. <span class="mc-variable ALVariables.Company variable">Alert Logic</span> also generates security incidents from Salesforce logs in the <a href="../../analyze/incidents.htm" class="MCXref xref">Incidents</a> page. For more information about authentication application security content, see <a href="../../analyze/security-incidents.htm" class="MCXref xref">Authentication Application Security Incidents</a>.</p>
                                        <p>The <span class="mc-variable ALVariables.Company variable">Alert Logic</span> Salesforce collector polls the following APIs for various types of data:</p>
                                        <ul>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_loginhistory.htm">LoginHistory</a> </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_eventlogfile.htm">EventLogFile</a> </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.platform_events.meta/platform_events/sforce_api_objects_loginevent.htm">LoginEvent</a>
                                            </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_logingeo.htm">LoginGeo</a>
                                            </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.object_reference.meta/object_reference/sforce_api_objects_user.htm">User</a>
                                            </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.platform_events.meta/platform_events/sforce_api_objects_apievent.htm">ApiEvent</a> </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.platform_events.meta/platform_events/sforce_api_objects_logoutevent.htm">LogoutEvent</a>
                                            </li>
                                            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.platform_events.meta/platform_events/sforce_api_objects_loginasevent.htm">LoginAsEvent</a>
                                            </li>
                                            <li><a href="https://help.magentrix.com/articles/knowledge/Error-REQUEST_LIMIT_EXCEEDED-1-5-2017">API Throttling</a>
                                            </li>
                                        </ul>
                                        <p>You must complete the following to successfully configure your Salesforce Log Collector:</p>
                                        <ol>
                                            <li value="1"><a href="#Set" class="MCXref xref">Set up Salesforce </a>
                                            </li>
                                            <li value="2"><a href="#Configur" class="MCXref xref">Configuring collection from the Alert Logic console</a>
                                            </li>
                                        </ol>
                                        <h2><a name="Set"></a>Set up Salesforce </h2>
                                        <p>Before you begin, ensure you have System Administrator privileges for the Salesforce account, and have a digital certificate generated. You must configure the permission set, create a client app, and then edit the policies and permission sets in the <a href="http://salesforce.com/">Salesforce console</a>. </p>
                                        <h3>Configure a Permission Set in Salesforce</h3>
                                        <p><b>To configure a permission set</b>:</p>
                                        <ol>
                                            <li value="1">In the Salesforce console, click the cog icon on the upper-right corner, and then click <b>Setup</b>.</li>
                                            <li value="2">In Administration, click <b>Users</b>, and then click <b>Permission Sets</b>.</li>
                                            <li value="3">Click the permission set for which you want to grant access. </li>
                                            <li value="4">Click <b>System Permissions</b>, and select the following:<ul><li>Apex REST Services</li><li>API Enabled</li><li>View Event Log Files</li><li>Manage Users (Required for LoginHistory objects only to view associated geo-data)</li></ul></li>
                                        </ol>
                                        <h3>Create a Connected App</h3>
                                        <p>You must select the API location (URL&#160;callback). You have the option to poll one of two APIs depending on the type of Salesforce account:</p>
                                        <ul>
                                            <li>Salesforce account (https://login.salesforce.com)</li>
                                            <li>Salesforce sandbox account (https://test.salesforce.com)</li>
                                        </ul>
                                        <p>Ensure your digital certificate is generated, which you will need to create the connected app. If you need a  digital certificate, you can reference the <a href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_auth_key_and_cert.htm">Salesforce Create a Private Key and Self-Signed Digital Certificate  guide</a> to generate your own self-signed certificate.</p>
                                        <p style="font-weight: normal;"><b>To create a Connected App</b>:</p>
                                        <ol>
                                            <li value="1">From Setup, click <b>Apps</b>, and then click <b>App Manager</b>.</li>
                                            <li value="2">Click <b>New Connected App</b>.</li>
                                            <li value="3">In the Basic Information section, fill out the required fields: <ol style="list-style-type: lower-alpha;"><li value="1">Enter a name for the connected app. </li><li value="2">Enter an API name. </li><li value="3">Enter the contact email. </li><li value="4">You can fill out the remaining fields in this section, although you are not required. </li></ol></li>
                                            <li value="4">In the API section, select <b>Enable OAuth Settings</b>.</li>
                                            <li value="5">Select <b>Enable for Device Flow</b>, and then in the Callback URL field, enter the callback URL (API location) that Salesforce calls back to <span class="mc-variable ALVariables.Company variable">Alert Logic</span> during OAuth.</li>
                                            <li value="6">Select the <b>Use Digital Signatures</b>, and then click <b>Choose File</b> to upload the server.crt file that contains your digital certificate.</li>
                                            <li value="7">Add <b>Perform requests on your behalf at any time</b> and <b>Access and manage your data</b> in the selected OAuth scopes.</li>
                                            <li value="8">Click <b>Save</b>.</li>
                                        </ol>
                                        <h3>Manage policies</h3>
                                        <p>You must edit the policies to allow your approved users as permitted users to the connected app you just created. </p>
                                        <p><b>To edit your policies</b>:</p>
                                        <ol>
                                            <li value="1">Click <b>Manage</b>.</li>
                                            <li value="2">Click <b>Edit Policies</b>.</li>
                                            <li value="3">In the OAuth Policies section, select <b>Admin approved users are pre-authorized for Permitted Users</b>, and then click <b>OK</b>.</li>
                                            <li value="4">Click <b>Save</b>.</li>
                                        </ol>
                                        <h3>Manage permission sets</h3>
                                        <p>You must manage the permission set to apply the permission set you created earlier. </p>
                                        <p><b>To manage permission sets</b>:</p>
                                        <ol>
                                            <li value="1">Click <b>Manage Profiles</b>.</li>
                                            <li value="2">Click <b>Manage Permission Sets</b>. </li>
                                            <li value="3">Select the permission set you created earlier.</li>
                                            <li value="4">Click <b>Save</b>.</li>
                                        </ol>
                                        <h2><a name="Configur"></a>Configuring collection from the <span class="mc-variable ALVariables.ALUI_1 variable">Alert Logic console</span></h2>
                                        <p>After you decide on the API location and create authentication information in Salesforce.com, you must complete the final steps for collection in the <span class="mc-variable ALVariables.ALUI variable">Alert Logic console</span>. This configuration is an account-level integration, which means you can configure more than one instance of Salesforce. This capability is useful when more than one instance of the application exists.</p>
                                        <p>To access the Application Registry page, click the menu icon (<img src="../../Resources/Images/dashboard/menu-icon.png" style="vertical-align: bottom;"></img>) from the Dashboards page. Click <img src="../../Resources/Images/dashboard/configure-icon.png" style="vertical-align: bottom;"></img><b>Configure</b>, and then click <b>Application Registry</b>. </p>
                                        <p><b>To add a new application collection</b>:</p>
                                        <ol>
                                            <li value="1">In the Application Registry, click the <b>Salesforce</b> tile. </li>
                                            <li value="2">In the <b>Application Name</b> field, enter a name for this Salesforce collection instance. </li>
                                            <li value="3">Under Collection Method and Policy, choose which callback URL from which you want to poll.
            </li>
                                            <li value="4">In the <b>Client ID</b> field, enter your client ID.
            </li>
                                            <li value="5">In the <b>User ID</b> field, enter your user ID.
            </li>
                                            <li value="6">In the <b>Secret Key</b> field, enter the RSA private key associated with the certificate associated with your Connected App you configured earlier.</li>
                                            <li value="7">Select the objects from which you want to collect.
			<div class="note"><p>You must enable Salesforce event monitoring on your account to access the following objects: <ul><li>EventLogFile</li><li>LoginEvent</li><li>LoginGeo</li><li>LogoutEvent</li><li>LoginAsEvent</li></ul></p></div></li>
                                            <li value="8">(Optional) Enter a <b>Collection Start</b> time using a format such as (2020-01-01T16:00:00Z). If the <b>Collection Start</b> field is left blank, only logs generated after you configure this collection instance will be collected. 
            <div class="note"><p>The collection start time determines how far back you want <span class="mc-variable ALVariables.Company variable">Alert Logic</span> to collect logs if data already exists in your account. <span class="mc-variable ALVariables.Company variable">Alert Logic</span> can only collect logs up to 30 days prior to the date you configured this collection instance. 
</p></div></li>
                                            <li value="9">Click <b>ADD</b>.
Wait a few minutes for the application to create and appear in your application list. Do not click <b>ADD</b> again. </li>
                                        </ol>
                                        <p>In the Applications List tab, if you configured your application correctly, within approximately 10 minutes you will see Configured next to the application. For more information about how to add instances or manage existing collecting applications, see <a href="../application-registry.htm#Configur" class="MCXref xref">Manage your configured applications</a>.</p>
                                        <h2>Security Content for incidents
</h2>
                                        <li><span class="mc-variable ALVariables.Company variable">Alert Logic</span> builds collectors to capture data from Salesforce and various other applications to create security content that is used to generate incidents for key security use cases. The following security incidents are available for Salesforce:</li>
                                        <ul>
                                            <li>Administrative Actions</li>
                                            <li>User Login AD</li>
                                            <li>User Behavior AD</li>
                                        </ul>
                                        <p>For more information about authentication application security content, see <a href="../../analyze/security-incidents.htm" class="MCXref xref">Authentication Application Security Incidents</a>.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>